/**
 * angular-coordinate
 * @version v0.1.5 - 2013-09-22
 * @link https://github.com/schickling/angular-coordinate.git
 * @author Johannes Schickling <schickling.j@gmail.com>, Tim Suchanek <tim.suchanek@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("angular-coordinate.html",[]),angular.module("angular-coordinate",["angular-coordinate.html"]).directive("coordinate",function(){return{restrict:"E",templateUrl:"angular-coordinate.html",link:function(a,b,c){function d(){F=c.scaleX||100,G=c.scaleY||100,A=parseInt(c.width,10)||700,c.width&&"%"===c.width.slice(-1)&&(A*=.01,A*=b[0].parentElement.offsetWidth),B=parseInt(c.height,10)||400,c.height&&"%"===c.height.slice(-1)&&(B*=.01,B*=b[0].parentElement.offsetHeight),D=[A/2,B/2],J=c.hasOwnProperty("showInput"),a.showInput=J}function e(){var a=b[0];I=a.getElementsByTagName("b"),z=a.getElementsByTagName("canvas")[0],z.width=A,z.height=B,C=z.getContext("2d"),a.style.width=A+"px",a.style.height=B+"px",a.style.display="block"}function f(){g(),h(),j()}function g(){z.addEventListener("mousewheel",function(a){var b=F/G,c=1.05,d=F+.05*a.wheelDelta*b,e=G+.05*a.wheelDelta;d>c&&e>c&&(F=d,G=e),a.preventDefault(),i(a),v()})}function h(){function a(a){i(a),E&&(u(a),H=[a.offsetX,a.offsetY])}z.onmousemove=a}function i(a){var b=p(a.offsetX,a.offsetY);I[0].innerText=b.x.toFixed(2),I[1].innerText=-b.y.toFixed(2)}function j(){function a(a){E=!0,H=[a.offsetX,a.offsetY]}function b(){E=!1}z.onmousedown=a,z.onmouseup=b}function k(){a.coordinate&&(K=new l,a.coordinate(K),a.angularCoordinate={addFunction:K.addFunction})}function l(){return{addPoint:function(a,b){q(a,b),v()},addFunction:function(a){s(a),v()},reset:function(){M=[],v()}}}function m(a,b){var c={x:0},d=window.math.parse(a,c);C.beginPath();for(var e=0;A>e;e+=1){c.x=p(e).x;var f=d.eval();C.lineTo(e,o(0,f).y)}C.strokeStyle=b,C.lineWidth=2,C.stroke()}function n(a,b){function c(a,b,c,d){var e=o(b,c);C.beginPath(),C.arc(e.x,e.y,a,0,2*Math.PI,!0),C.fillStyle=d,C.fill(),C.closePath()}c(3,a,b,"#1BE07E"),c(9,a,b,"rgba(0, 0, 0, 0.1)")}function o(a,b){return{x:a*F+D[0],y:-1*b*G+D[1]}}function p(a,b){return{x:(a-D[0])/F,y:(b-D[1])/G}}function q(a,b){L.push([a,b])}function r(){for(var a=0,b=L.length;b>a;a+=1){var c=L[a];n(c[0],c[1])}}function s(a){M.push(a)}function t(){for(var a=["#1B3E59","#730202","#FFAC00","#0C5953"],b=0,c=M.length;c>b;b+=1){var d=M[b],e=a[b%(a.length-1)];m(d,e)}}function u(a){var b=a.offsetX-H[0],c=a.offsetY-H[1];D[0]+=b,D[1]+=c,v()}function v(){w(),x(),y(),r(),t()}function w(){C.clearRect(0,0,A,B)}function x(){C.beginPath(),C.moveTo(0,D[1]),C.lineTo(A,D[1]);var a,b,c,d=A/F;for(a=1;d>=a;a++)c=a*F,C.moveTo(D[0]-c,D[1]-4),C.lineTo(D[0]-c,D[1]+4),C.moveTo(D[0]+c,D[1]-4),C.lineTo(D[0]+c,D[1]+4);for(C.strokeStyle="rgba(0, 0, 0, 1)",C.stroke(),C.beginPath(),b=0;d>=b;b+=.1)c=b*F,C.moveTo(D[0]-c,D[1]-2),C.lineTo(D[0]-c,D[1]+2),C.moveTo(D[0]+c,D[1]-2),C.lineTo(D[0]+c,D[1]+2);C.strokeStyle="rgba(0, 0, 0, 0.5)",C.stroke()}function y(){C.beginPath(),C.moveTo(D[0],0),C.lineTo(D[0],B);var a,b,c,d=B/G;for(a=1;d>=a;a++)c=a*G,C.moveTo(D[0]-4,D[1]-c),C.lineTo(D[0]+4,D[1]-c),C.moveTo(D[0]-4,D[1]+c),C.lineTo(D[0]+4,D[1]+c);for(C.strokeStyle="rgba(0, 0, 0, 1)",C.stroke(),C.beginPath(),b=0;d>=b;b+=.1)c=b*G,C.moveTo(D[0]-2,D[1]-c),C.lineTo(D[0]+2,D[1]-c),C.moveTo(D[0]-2,D[1]+c),C.lineTo(D[0]+2,D[1]+c);C.strokeStyle="rgba(0, 0, 0, 0.5)",C.stroke()}var z,A,B,C,D,E,F,G,H,I,J,K,L=[],M=[];d(),e(),f(),k(),v()}}}),angular.module("angular-coordinate.html",[]).run(["$templateCache",function(a){a.put("angular-coordinate.html",'<style type="text/css">\n	#angular-coordinate {\n		display: block;\n		position: relative;\n	}\n\n	#angular-coordinate-position {\n		position: absolute;\n		top: 10px;\n		right: 10px;\n		color: #1B77E0;\n		font-size: 13px;\n	}\n\n	#angular-coordinate-position div {\n		float: left;\n		width: 58px;\n		margin-left: 10px;\n	}\n\n	#angular-coordinate-buttons {\n		position: absolute;\n		top: 0;\n		left: 0;\n	}\n\n	#angular-coordinate-input {\n		padding: 10px 10px;\n		line-height: 20px;\n		font-size: 20px;\n		font-family: Arial;\n		height: 20px;\n		position: absolute;\n		bottom: 5px;\n		z-index: 2;\n		width: 100%;\n	}\n\n</style>\n<div id="angular-coordinate">\n	<canvas></canvas>\n	<div id="angular-coordinate-position">\n		<div>x: <b>0</b></div>\n		<div>y: <b>0</b></div>\n	</div>\n	<!-- <div id="angular-coordinate-buttons">\n		<button>Fullscreen</button>\n	</div> -->\n	<form ng-submit="angularCoordinate.addFunction(input)" ng-show=\'showInput\'>\n		<input type="text" ng-model="input" id="angular-coordinate-input" placeholder=\'Type in some function like "x"\'>\n	</form>\n</div>\n')}]);